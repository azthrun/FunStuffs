require "helpers/application_helper"

class Settings
  include Rhom::PropertyBag
  
  set :partition, :local
  
  PANELID = "panelId"
  
  WAITFOR_SETUP = "setup"
  
  class << self
    include ApplicationHelper
    
    def instance
      resetInstance unless @instance
      @instance
    end
    
    def resetInstance
      @instance = Settings.find(0).first
      @instance = Settings.create({"object" => 0}) if @instance.nil? or @instance.empty?
    end
    
    def set(key, value)
      instance.update_attributes({key => value})
    end
    
    def panelId
      instance.panelId 
    end
  end
end